<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Beverly Knits - Yarn Orders Time-Phased View</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        .week-cell {
            min-width: 80px;
            text-align: right;
            padding: 4px 8px;
            border-right: 1px solid #e5e7eb;
        }
        .negative-balance {
            background-color: #fee2e2;
            color: #dc2626;
            font-weight: 600;
        }
        .positive-balance {
            background-color: #f0fdf4;
            color: #16a34a;
        }
        .zero-balance {
            background-color: #fef3c7;
            color: #d97706;
        }
        .header-week {
            background: linear-gradient(to bottom, #f9fafb, #f3f4f6);
            font-weight: 600;
            text-align: center;
            border-right: 1px solid #d1d5db;
        }
        .yarn-row:hover {
            background-color: #f9fafb;
        }
        .sticky-column {
            position: sticky;
            left: 0;
            background: white;
            z-index: 10;
            box-shadow: 2px 0 4px rgba(0,0,0,0.05);
        }
        .table-container {
            overflow-x: auto;
            overflow-y: auto;
            max-height: 600px;
            border: 1px solid #e5e7eb;
            border-radius: 8px;
        }
        .improvement-badge {
            @apply inline-flex items-center px-2 py-1 text-xs font-semibold rounded-full;
        }
        .new-feature {
            @apply bg-green-100 text-green-800 border border-green-300;
        }
        .enhanced-feature {
            @apply bg-blue-100 text-blue-800 border border-blue-300;
        }
        .shortage-indicator {
            display: inline-block;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            margin-left: 4px;
        }
        .critical-shortage {
            background-color: #dc2626;
            animation: pulse 1s infinite;
        }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Header -->
    <div class="bg-gradient-to-r from-blue-600 to-purple-600 text-white p-6">
        <div class="container mx-auto">
            <h1 class="text-3xl font-bold mb-2">
                <i class="fas fa-calendar-alt mr-3"></i>
                Yarn Orders - Time-Phased View with Enhancements
            </h1>
            <p class="text-blue-100">Weekly inventory projections with integrated PO scheduling and shortage alerts</p>
            <div class="mt-4 flex gap-4">
                <span class="improvement-badge new-feature">
                    <i class="fas fa-star mr-1"></i> Enhanced Weekly View
                </span>
                <span class="improvement-badge enhanced-feature">
                    <i class="fas fa-arrow-up mr-1"></i> All Yarns Coverage
                </span>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <div class="container-fluid mx-auto p-6">

        <!-- Summary Cards -->
        <div class="grid grid-cols-1 md:grid-cols-5 gap-4 mb-6">
            <div class="bg-white rounded-lg shadow p-4">
                <div class="text-sm text-gray-600 mb-1">Total Yarns</div>
                <div class="text-2xl font-bold text-gray-800">1,199</div>
                <div class="text-xs text-green-600 mt-1">100% Coverage</div>
            </div>
            <div class="bg-white rounded-lg shadow p-4">
                <div class="text-sm text-gray-600 mb-1">Critical Shortages</div>
                <div class="text-2xl font-bold text-red-600">31</div>
                <div class="text-xs text-red-600 mt-1">Immediate Action</div>
            </div>
            <div class="bg-white rounded-lg shadow p-4">
                <div class="text-sm text-gray-600 mb-1">Weeks Covered</div>
                <div class="text-2xl font-bold text-blue-600">52</div>
                <div class="text-xs text-blue-600 mt-1">Full Year View</div>
            </div>
            <div class="bg-white rounded-lg shadow p-4">
                <div class="text-sm text-gray-600 mb-1">POs Scheduled</div>
                <div class="text-2xl font-bold text-green-600">68</div>
                <div class="text-xs text-orange-600 mt-1">91 Need Creation</div>
            </div>
            <div class="bg-white rounded-lg shadow p-4">
                <div class="text-sm text-gray-600 mb-1">Weekly Demand</div>
                <div class="text-2xl font-bold text-purple-600">47,500 lbs</div>
                <div class="text-xs text-purple-600 mt-1">Average</div>
            </div>
        </div>

        <!-- Time-Phased Yarn Orders Table -->
        <div class="bg-white rounded-xl shadow-lg p-6 mb-6">
            <div class="flex items-center justify-between mb-4">
                <h2 class="text-2xl font-bold text-gray-800">
                    <i class="fas fa-table mr-3 text-blue-600"></i>
                    Time-Phased Yarn Inventory & Orders
                </h2>
                <div class="flex gap-2">
                    <button class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700">
                        <i class="fas fa-download mr-2"></i>Export
                    </button>
                    <button class="px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700">
                        <i class="fas fa-sync-alt mr-2"></i>Refresh
                    </button>
                </div>
            </div>

            <!-- Filters -->
            <div class="flex gap-4 mb-4">
                <input type="text" placeholder="Search yarn..." class="px-3 py-2 border rounded-lg flex-1 max-w-xs">
                <select class="px-3 py-2 border rounded-lg">
                    <option>All Yarns</option>
                    <option>Critical Shortages Only</option>
                    <option>Negative Balance</option>
                    <option>With POs</option>
                    <option>Without POs</option>
                </select>
                <select class="px-3 py-2 border rounded-lg">
                    <option>All Suppliers</option>
                    <option>CS AMERICA</option>
                    <option>DRAKE EXTRUSION</option>
                    <option>DECA GLOBAL</option>
                </select>
            </div>

            <!-- Table Container -->
            <div class="table-container">
                <table class="w-full text-sm">
                    <thead class="sticky top-0 z-20 bg-white">
                        <tr>
                            <th class="sticky-column px-4 py-3 text-left bg-gray-50 font-semibold text-gray-700">Yarn</th>
                            <th class="sticky left-20 z-10 px-4 py-3 text-left bg-gray-50 font-semibold text-gray-700" style="left: 80px;">Supplier</th>
                            <th class="sticky left-40 z-10 px-4 py-3 text-left bg-gray-50 font-semibold text-gray-700" style="left: 200px;">Description</th>
                            <th class="sticky left-60 z-10 px-4 py-3 text-left bg-gray-50 font-semibold text-gray-700" style="left: 400px;">Color</th>
                            <th class="px-4 py-3 text-center bg-gray-50 font-semibold text-gray-700">Monday Inventory</th>
                            <th class="px-4 py-3 text-right bg-gray-50 font-semibold text-gray-700">Balance</th>
                            <!-- Weekly columns -->
                            <th class="header-week">Week 36</th>
                            <th class="header-week">Week 37</th>
                            <th class="header-week">Week 38</th>
                            <th class="header-week">Week 39</th>
                            <th class="header-week">Week 40</th>
                            <th class="header-week">Week 41</th>
                            <th class="header-week">Week 42</th>
                            <th class="header-week">Week 43</th>
                            <th class="header-week">Week 44</th>
                            <th class="header-week">Week 45</th>
                            <th class="header-week">Week 46</th>
                            <th class="header-week">Week 47</th>
                            <th class="header-week">Week 48</th>
                            <th class="header-week">Week 49</th>
                            <th class="header-week">Week 50</th>
                            <th class="header-week">Week 51</th>
                            <th class="header-week">Week 52</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Example rows matching the screenshot format -->
                        <tr class="yarn-row border-b">
                            <td class="sticky-column px-4 py-2 font-medium">18771</td>
                            <td class="px-4 py-2">CS AMERICA</td>
                            <td class="px-4 py-2">1/150/96 100% Polyester Semi Dull</td>
                            <td class="px-4 py-2">Semi Dull</td>
                            <td class="px-4 py-2 text-center">1,291</td>
                            <td class="px-4 py-2 text-right font-semibold">10,550</td>
                            <td class="week-cell positive-balance">(1,450)</td>
                            <td class="week-cell positive-balance">(1,450)</td>
                            <td class="week-cell positive-balance">(1,450)</td>
                            <td class="week-cell positive-balance">(1,450)</td>
                            <td class="week-cell positive-balance">(1,450)</td>
                            <td class="week-cell positive-balance">(1,450)</td>
                            <td class="week-cell positive-balance">(1,450)</td>
                            <td class="week-cell positive-balance">(1,450)</td>
                            <td class="week-cell positive-balance">(1,450)</td>
                            <td class="week-cell positive-balance">(1,450)</td>
                            <td class="week-cell positive-balance">(1,450)</td>
                            <td class="week-cell positive-balance">(1,450)</td>
                            <td class="week-cell positive-balance">(1,450)</td>
                            <td class="week-cell positive-balance">(1,450)</td>
                            <td class="week-cell positive-balance">(1,450)</td>
                            <td class="week-cell positive-balance">(1,450)</td>
                            <td class="week-cell positive-balance">(1,450)</td>
                        </tr>
                        <tr class="yarn-row border-b bg-red-50">
                            <td class="sticky-column px-4 py-2 font-medium">
                                14415
                                <span class="shortage-indicator critical-shortage"></span>
                            </td>
                            <td class="px-4 py-2">CléOsaka.OS Hysteria</td>
                            <td class="px-4 py-2">2/70 100% Spandex Clear R007</td>
                            <td class="px-4 py-2">Clear</td>
                            <td class="px-4 py-2 text-center">0</td>
                            <td class="px-4 py-2 text-right font-semibold text-red-600">-850</td>
                            <td class="week-cell negative-balance">(391)</td>
                            <td class="week-cell negative-balance">(391)</td>
                            <td class="week-cell negative-balance">(391)</td>
                            <td class="week-cell negative-balance">(391)</td>
                            <td class="week-cell negative-balance">(391)</td>
                            <td class="week-cell negative-balance">(391)</td>
                            <td class="week-cell negative-balance">(391)</td>
                            <td class="week-cell negative-balance">(391)</td>
                            <td class="week-cell negative-balance">(391)</td>
                            <td class="week-cell negative-balance">(391)</td>
                            <td class="week-cell negative-balance">(391)</td>
                            <td class="week-cell negative-balance">(391)</td>
                            <td class="week-cell negative-balance">(391)</td>
                            <td class="week-cell negative-balance">(391)</td>
                            <td class="week-cell negative-balance">(391)</td>
                            <td class="week-cell negative-balance">(391)</td>
                            <td class="week-cell negative-balance">(391)</td>
                        </tr>
                        <tr class="yarn-row border-b">
                            <td class="sticky-column px-4 py-2 font-medium">18570</td>
                            <td class="px-4 py-2">RUBBER QUALITY YARNS</td>
                            <td class="px-4 py-2">10/2 60/20 95%Polyester Natural</td>
                            <td class="px-4 py-2">Natural</td>
                            <td class="px-4 py-2 text-center">514</td>
                            <td class="px-4 py-2 text-right font-semibold">8,340</td>
                            <td class="week-cell negative-balance">(162)</td>
                            <td class="week-cell negative-balance">(162)</td>
                            <td class="week-cell positive-balance">838</td>
                            <td class="week-cell positive-balance">838</td>
                            <td class="week-cell positive-balance">838</td>
                            <td class="week-cell positive-balance">838</td>
                            <td class="week-cell negative-balance">(162)</td>
                            <td class="week-cell negative-balance">(162)</td>
                            <td class="week-cell negative-balance">(162)</td>
                            <td class="week-cell positive-balance">838</td>
                            <td class="week-cell positive-balance">838</td>
                            <td class="week-cell positive-balance">838</td>
                            <td class="week-cell positive-balance">838</td>
                            <td class="week-cell positive-balance">838</td>
                            <td class="week-cell positive-balance">838</td>
                            <td class="week-cell positive-balance">838</td>
                            <td class="week-cell positive-balance">838</td>
                        </tr>
                        <tr class="yarn-row border-b">
                            <td class="sticky-column px-4 py-2 font-medium">12030</td>
                            <td class="px-4 py-2">ALBA</td>
                            <td class="px-4 py-2">1/28 100% Polyester Natural</td>
                            <td class="px-4 py-2">Natural</td>
                            <td class="px-4 py-2 text-center">(556)</td>
                            <td class="px-4 py-2 text-right font-semibold text-orange-600">(556)</td>
                            <td class="week-cell zero-balance">(73)</td>
                            <td class="week-cell zero-balance">(73)</td>
                            <td class="week-cell zero-balance">(73)</td>
                            <td class="week-cell zero-balance">(73)</td>
                            <td class="week-cell zero-balance">(73)</td>
                            <td class="week-cell zero-balance">(73)</td>
                            <td class="week-cell zero-balance">(73)</td>
                            <td class="week-cell zero-balance">(73)</td>
                            <td class="week-cell zero-balance">(73)</td>
                            <td class="week-cell zero-balance">(73)</td>
                            <td class="week-cell zero-balance">(73)</td>
                            <td class="week-cell zero-balance">(73)</td>
                            <td class="week-cell zero-balance">(73)</td>
                            <td class="week-cell zero-balance">(73)</td>
                            <td class="week-cell zero-balance">(73)</td>
                            <td class="week-cell zero-balance">(73)</td>
                            <td class="week-cell zero-balance">(73)</td>
                        </tr>
                        <tr class="yarn-row border-b bg-green-50">
                            <td class="sticky-column px-4 py-2 font-medium">
                                15071
                                <i class="fas fa-truck text-green-600 ml-2 text-xs" title="PO Scheduled"></i>
                            </td>
                            <td class="px-4 py-2">DRAKE EXTRUSION</td>
                            <td class="px-4 py-2">1/70/36 100% Polypropylene Black</td>
                            <td class="px-4 py-2">Black</td>
                            <td class="px-4 py-2 text-center">0</td>
                            <td class="px-4 py-2 text-right font-semibold">168</td>
                            <td class="week-cell zero-balance">0</td>
                            <td class="week-cell zero-balance">0</td>
                            <td class="week-cell positive-balance">5,000</td>
                            <td class="week-cell positive-balance">4,800</td>
                            <td class="week-cell positive-balance">4,600</td>
                            <td class="week-cell positive-balance">4,400</td>
                            <td class="week-cell positive-balance">4,200</td>
                            <td class="week-cell positive-balance">4,000</td>
                            <td class="week-cell positive-balance">3,800</td>
                            <td class="week-cell positive-balance">3,600</td>
                            <td class="week-cell positive-balance">3,400</td>
                            <td class="week-cell positive-balance">3,200</td>
                            <td class="week-cell positive-balance">3,000</td>
                            <td class="week-cell positive-balance">2,800</td>
                            <td class="week-cell positive-balance">2,600</td>
                            <td class="week-cell positive-balance">2,400</td>
                            <td class="week-cell positive-balance">2,200</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <!-- Legend -->
            <div class="flex items-center justify-between mt-4 pt-4 border-t">
                <div class="flex gap-6 text-xs">
                    <div class="flex items-center">
                        <div class="w-4 h-4 bg-red-200 border border-red-400 mr-2"></div>
                        <span>Negative Balance (Shortage)</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-4 h-4 bg-yellow-200 border border-yellow-400 mr-2"></div>
                        <span>Low/Zero Balance</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-4 h-4 bg-green-200 border border-green-400 mr-2"></div>
                        <span>Positive Balance</span>
                    </div>
                    <div class="flex items-center">
                        <i class="fas fa-truck text-green-600 mr-2"></i>
                        <span>PO Scheduled</span>
                    </div>
                    <div class="flex items-center">
                        <span class="shortage-indicator critical-shortage mr-2"></span>
                        <span>Critical Shortage</span>
                    </div>
                </div>
                <div class="text-xs text-gray-600">
                    Values in parentheses () indicate weekly demand/consumption
                </div>
            </div>
        </div>

        <!-- Enhanced Features Section -->
        <div class="bg-white rounded-xl shadow-lg p-6 mb-6">
            <h2 class="text-xl font-bold text-gray-800 mb-4">
                <i class="fas fa-star mr-3 text-yellow-500"></i>
                Enhanced Features in This View
            </h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                <div class="border rounded-lg p-4">
                    <h3 class="font-semibold text-blue-600 mb-2">
                        <i class="fas fa-check-circle mr-2"></i>
                        100% Yarn Coverage
                    </h3>
                    <p class="text-sm text-gray-600">
                        All 1,199 yarns shown with weekly projections, not just those with POs
                    </p>
                </div>
                <div class="border rounded-lg p-4">
                    <h3 class="font-semibold text-green-600 mb-2">
                        <i class="fas fa-calendar-check mr-2"></i>
                        52-Week Projection
                    </h3>
                    <p class="text-sm text-gray-600">
                        Full year visibility with demand forecasting and PO integration
                    </p>
                </div>
                <div class="border rounded-lg p-4">
                    <h3 class="font-semibold text-purple-600 mb-2">
                        <i class="fas fa-exclamation-triangle mr-2"></i>
                        Shortage Alerts
                    </h3>
                    <p class="text-sm text-gray-600">
                        Visual indicators for critical shortages and upcoming risks
                    </p>
                </div>
            </div>
        </div>

        <!-- Quick Actions Panel -->
        <div class="bg-gradient-to-r from-blue-50 to-purple-50 rounded-xl shadow-lg p-6">
            <h2 class="text-xl font-bold text-gray-800 mb-4">
                <i class="fas fa-bolt mr-3 text-orange-500"></i>
                Quick Actions Based on Time-Phased Analysis
            </h2>
            <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                <button class="bg-red-600 text-white p-4 rounded-lg hover:bg-red-700 transition">
                    <div class="text-2xl font-bold">31</div>
                    <div class="text-sm">Create Emergency POs</div>
                </button>
                <button class="bg-orange-600 text-white p-4 rounded-lg hover:bg-orange-700 transition">
                    <div class="text-2xl font-bold">15</div>
                    <div class="text-sm">Expedite Existing POs</div>
                </button>
                <button class="bg-blue-600 text-white p-4 rounded-lg hover:bg-blue-700 transition">
                    <div class="text-2xl font-bold">47</div>
                    <div class="text-sm">Schedule Future POs</div>
                </button>
                <button class="bg-green-600 text-white p-4 rounded-lg hover:bg-green-700 transition">
                    <div class="text-2xl font-bold">12</div>
                    <div class="text-sm">Optimize Inventory</div>
                </button>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <div class="bg-gray-800 text-white p-6 mt-12">
        <div class="container mx-auto text-center">
            <p class="text-sm">
                <i class="fas fa-info-circle mr-2"></i>
                This enhanced view shows how yarn orders should be displayed with weekly time-phased projections
            </p>
            <p class="text-xs text-gray-400 mt-2">
                Matching the format from your screenshot with additional enhancements for better visibility
            </p>
        </div>
    </div>

    <script>
        // Simulate dynamic updates
        function updateWeeklyData() {
            const cells = document.querySelectorAll('.week-cell');
            cells.forEach(cell => {
                const value = parseInt(cell.textContent.replace(/[()]/g, ''));
                if (Math.random() > 0.9) {
                    // Simulate PO arrival
                    const newValue = value + Math.floor(Math.random() * 5000);
                    cell.textContent = `(${newValue})`;
                    cell.className = newValue > 0 ? 'week-cell positive-balance' :
                                     newValue === 0 ? 'week-cell zero-balance' :
                                     'week-cell negative-balance';
                }
            });
        }

        // Update every 10 seconds for demo
        setInterval(updateWeeklyData, 10000);

        // Add hover effects
        document.querySelectorAll('.yarn-row').forEach(row => {
            row.addEventListener('mouseenter', function() {
                this.style.backgroundColor = '#f9fafb';
            });
            row.addEventListener('mouseleave', function() {
                this.style.backgroundColor = '';
            });
        });

        console.log('Time-phased yarn orders view loaded successfully');
    </script>
</body>
</html>